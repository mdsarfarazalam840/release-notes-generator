# Development docker-compose with hot reload for frontend
services:
  # Backend Service - Python Release Notes Generator
  backend:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    container_name: release-notes-backend-dev
    env_file:
      - ../.env
    volumes:
      - ..:/app
    environment:
      - RELEASE_VERSION=${RELEASE_VERSION:-dev-compose}
      - AUDIENCE=${AUDIENCE:-users}
      - KEEP_ALIVE=true
    stdin_open: true
    tty: true
    command: >
      tail -f /dev/null
    networks:
      - release-notes-network

  # Frontend Service - Development mode with hot reload
  frontend-dev:
    image: node:18-alpine
    container_name: release-notes-frontend-dev
    working_dir: /app
    volumes:
      - ../frontend:/app
      - /app/node_modules
    ports:
      - "${FRONTEND_PORT:-5173}:5173"
    command: sh -c "npm install && npm run dev -- --host 0.0.0.0"
    networks:
      - release-notes-network

networks:
  release-notes-network:
    driver: bridge

